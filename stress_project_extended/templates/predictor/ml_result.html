{% extends 'predictor/base.html' %}

{% block title %}Prediction Result{% endblock %}

{% block content %}
<div class="fade-in">
    <div class="text-center mb-4">
        <h2 class="mb-2">ğŸ“Š Stress Detection Result</h2>
        <p class="text-muted">AI-powered analysis of your physiological data</p>
    </div>
    
    <div class="card mt-4" style="border: 3px solid 
        {% if data.predicted_level == 'Stressed' %}#dc3545
        {% elif data.predicted_level == 'Neutral' %}#ffc107
        {% elif data.predicted_level == 'Amused' %}#28a745
        {% else %}#6c757d{% endif %};">
        <div class="card-body text-center p-5">
            <h3 class="mb-4">Your Stress Level</h3>
            
            {% if data.predicted_level == 'Stressed' %}
            <div class="alert alert-danger" style="font-size: 3rem; padding: 3rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(220, 53, 69, 0.3);">
                <div style="font-size: 4rem; margin-bottom: 20px;">âš ï¸</div>
                <strong>{{ data.predicted_level }}</strong>
                <p class="mt-3" style="font-size: 1.2rem;">High stress levels detected</p>
            </div>
            {% elif data.predicted_level == 'Neutral' %}
            <div class="alert alert-warning" style="font-size: 3rem; padding: 3rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(255, 193, 7, 0.3);">
                <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ˜</div>
                <strong>{{ data.predicted_level }}</strong>
                <p class="mt-3" style="font-size: 1.2rem;">Moderate stress levels</p>
            </div>
            {% elif data.predicted_level == 'Amused' %}
            <div class="alert alert-success" style="font-size: 3rem; padding: 3rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(40, 167, 69, 0.3);">
                <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ˜Š</div>
                <strong>{{ data.predicted_level }}</strong>
                <p class="mt-3" style="font-size: 1.2rem;">Low stress - feeling great!</p>
            </div>
            {% else %}
            <div class="alert alert-info" style="font-size: 3rem; padding: 3rem; border-radius: 20px;">
                <strong>{{ data.predicted_level }}</strong>
            </div>
            {% endif %}
            
            <div class="mt-4 p-3" style="background: #f8f9fa; border-radius: 15px;">
                <div class="row">
                    <div class="col-md-6">
                        <strong>ğŸ“… Date:</strong> {{ data.created_at|date:"l, F d, Y" }}
                    </div>
                    <div class="col-md-6">
                        <strong>ğŸ• Time:</strong> {{ data.created_at|date:"h:i:s A" }}
                    </div>
                </div>
            </div>
            
            {% if data.confidence_amused %}
            <h5 class="mt-5 mb-4">ğŸ¯ Confidence Scores</h5>
            <div class="row mt-3">
                <div class="col-md-4 mb-3">
                    <div class="card h-100" style="border: 2px solid #28a745;">
                        <div class="card-body text-center">
                            <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ˜Š</div>
                            <h6 class="fw-bold">Amused</h6>
                            <div class="progress" style="height: 35px; border-radius: 20px;">
                                <div class="progress-bar bg-success" role="progressbar" 
                                     style="width: {{ data.confidence_amused|floatformat:0 }}%; font-size: 1.1rem; font-weight: bold;">
                                    {{ data.confidence_amused|floatformat:1 }}%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card h-100" style="border: 2px solid #ffc107;">
                        <div class="card-body text-center">
                            <div style="font-size: 2rem; margin-bottom: 10px;">ğŸ˜</div>
                            <h6 class="fw-bold">Neutral</h6>
                            <div class="progress" style="height: 35px; border-radius: 20px;">
                                <div class="progress-bar bg-warning" role="progressbar" 
                                     style="width: {{ data.confidence_neutral|floatformat:0 }}%; font-size: 1.1rem; font-weight: bold;">
                                    {{ data.confidence_neutral|floatformat:1 }}%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card h-100" style="border: 2px solid #dc3545;">
                        <div class="card-body text-center">
                            <div style="font-size: 2rem; margin-bottom: 10px;">âš ï¸</div>
                            <h6 class="fw-bold">Stressed</h6>
                            <div class="progress" style="height: 35px; border-radius: 20px;">
                                <div class="progress-bar bg-danger" role="progressbar" 
                                     style="width: {{ data.confidence_stressed|floatformat:0 }}%; font-size: 1.1rem; font-weight: bold;">
                                    {{ data.confidence_stressed|floatformat:1 }}%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    
    <div class="card mt-5" style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);">
        <div class="card-body p-4">
            <h5 class="mb-4">ğŸ’¡ Personalized Recommendations</h5>
            {% if data.predicted_level == 'Stressed' %}
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div class="card h-100">
                        <div class="card-body">
                            <h6 class="fw-bold">ğŸ§˜ Immediate Actions</h6>
                            <ul class="mb-0">
                                <li>Take a 5-minute breathing break</li>
                                <li>Step away from stressors</li>
                                <li>Practice progressive muscle relaxation</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="card h-100">
                        <div class="card-body">
                            <h6 class="fw-bold">ğŸ¥ Long-term Support</h6>
                            <ul class="mb-0">
                                <li>Consider professional counseling</li>
                                <li>Establish a regular sleep schedule</li>
                                <li>Incorporate daily exercise</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            {% elif data.predicted_level == 'Neutral' %}
            <div class="card">
                <div class="card-body">
                    <h6 class="fw-bold">âœ… Maintain Balance</h6>
                    <ul class="mb-0">
                        <li>Continue your current stress management practices</li>
                        <li>Stay mindful of your mental health</li>
                        <li>Keep up with regular exercise and healthy habits</li>
                        <li>Monitor for any changes in stress levels</li>
                    </ul>
                </div>
            </div>
            {% else %}
            <div class="card">
                <div class="card-body">
                    <h6 class="fw-bold">ğŸŒŸ Keep It Up!</h6>
                    <ul class="mb-0">
                        <li>Great job! You're managing stress well</li>
                        <li>Continue your healthy lifestyle habits</li>
                        <li>Share your wellness practices with others</li>
                        <li>Use this positive state to tackle challenges</li>
                    </ul>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    
    <div class="mt-5 text-center">
        <a href="{% url 'ml_predict' %}" class="btn btn-primary btn-lg me-2">
            ğŸ”„ New Prediction
        </a>
        <a href="{% url 'dashboard' %}" class="btn btn-success btn-lg me-2">
            ğŸ“Š Dashboard
        </a>
        <a href="{% url 'resources' %}" class="btn btn-info btn-lg">
            ğŸ“š Resources
        </a>
    </div>
</div>
{% endblock %}
